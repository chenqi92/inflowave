# æµè§ˆå™¨æ¨¡å¼å…¼å®¹æ€§ä¿®å¤æ€»ç»“

## ğŸ¯ ä¿®å¤ç›®æ ‡

è§£å†³åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨åº”ç”¨æ—¶é‡åˆ°çš„ä»¥ä¸‹é—®é¢˜ï¼š
1. React Router é‡å¤åµŒå¥—é”™è¯¯å¯¼è‡´åº”ç”¨å´©æºƒ
2. Tauri API åœ¨æµè§ˆå™¨ä¸­ä¸å¯ç”¨å¯¼è‡´é¡µé¢ç©ºç™½
3. React Router æœªæ¥ç‰ˆæœ¬è­¦å‘Š
4. Antd é™æ€æ–¹æ³•ä¸Šä¸‹æ–‡è­¦å‘Š

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. æ ¸å¿ƒæ¶æ„ä¿®å¤

#### React Router é‡å¤åµŒå¥—
- **æ–‡ä»¶**: `src/App.tsx`, `src/main.tsx`
- **ä¿®å¤**: ç§»é™¤ App.tsx ä¸­é‡å¤çš„ BrowserRouterï¼Œä¿æŒå•ä¸€è·¯ç”±å™¨å®ä¾‹
- **çŠ¶æ€**: âœ… å®Œæˆ

#### Tauri API å…¼å®¹æ€§
- **æ–‡ä»¶**: `src/utils/tauri.ts` (æ–°å»º)
- **åŠŸèƒ½**: 
  - ç¯å¢ƒæ£€æµ‹ (Tauri vs æµè§ˆå™¨)
  - å®‰å…¨çš„ API è°ƒç”¨åŒ…è£…å™¨
  - ä¸°å¯Œçš„æ¨¡æ‹Ÿæ•°æ®æ”¯æŒ
- **çŠ¶æ€**: âœ… å®Œæˆ

#### React Router æœªæ¥ç‰ˆæœ¬è­¦å‘Š
- **æ–‡ä»¶**: `src/main.tsx`
- **ä¿®å¤**: æ·»åŠ  v7_startTransition å’Œ v7_relativeSplatPath æ ‡å¿—
- **çŠ¶æ€**: âœ… å®Œæˆ

#### Antd é™æ€æ–¹æ³•ä¸Šä¸‹æ–‡è­¦å‘Š
- **æ–‡ä»¶**: `src/utils/message.ts` (æ–°å»º), `src/main.tsx`
- **ä¿®å¤**: ä½¿ç”¨ App ç»„ä»¶æä¾›æ¶ˆæ¯ä¸Šä¸‹æ–‡ï¼Œæ›¿æ¢é™æ€æ–¹æ³•
- **çŠ¶æ€**: âœ… å®Œæˆ

### 2. ç”¨æˆ·ä½“éªŒæ”¹è¿›

#### æµè§ˆå™¨æ¨¡å¼æç¤º
- **æ–‡ä»¶**: `src/components/common/BrowserModeNotice.tsx` (æ–°å»º)
- **åŠŸèƒ½**: 
  - å‹å¥½çš„æµè§ˆå™¨æ¨¡å¼è¯´æ˜
  - åŠŸèƒ½å¯ç”¨æ€§è¯´æ˜
  - å¯åŠ¨å®Œæ•´åº”ç”¨çš„æŒ‡å¯¼
- **çŠ¶æ€**: âœ… å®Œæˆ

### 3. ç»„ä»¶çº§ä¿®å¤

#### å·²ä¿®å¤çš„ç»„ä»¶
- âœ… `src/App.tsx` - ä¸»åº”ç”¨ç»„ä»¶
- âœ… `src/components/extensions/ExtensionManager.tsx` - æ‰©å±•ç®¡ç†
- âœ… `src/components/performance/PerformanceMonitor.tsx` - æ€§èƒ½ç›‘æ§
- âœ… `src/pages/Connections/index.tsx` - è¿æ¥ç®¡ç†
- âœ… `src/components/common/GlobalSearch.tsx` - å…¨å±€æœç´¢
- âœ… `src/components/query/QueryEditor.tsx` - æŸ¥è¯¢ç¼–è¾‘å™¨

#### å¾…ä¿®å¤çš„ç»„ä»¶ (ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½)
- â³ `src/components/common/ContextMenu.tsx`
- â³ `src/components/common/DataExportDialog.tsx`
- â³ `src/components/common/DataWriteDialog.tsx`
- â³ `src/components/common/ImportDialog.tsx`
- â³ `src/components/common/RetentionPolicyDialog.tsx`
- â³ å…¶ä»–éæ ¸å¿ƒç»„ä»¶...

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•è„šæœ¬
- `scripts/test-browser-fixes.ps1` - ä¿®å¤æ•ˆæœéªŒè¯
- `scripts/test-browser-mode.ps1` - æµè§ˆå™¨æ¨¡å¼æµ‹è¯•
- `scripts/quick-fix-imports.ps1` - å¿«é€Ÿä¿®å¤å·¥å…·

### é¢„æœŸæ•ˆæœ
- âœ… é¡µé¢æ­£å¸¸åŠ è½½ï¼Œæ— ç™½å±
- âœ… æ˜¾ç¤ºæµè§ˆå™¨æ¨¡å¼å‹å¥½æç¤º
- âœ… æ§åˆ¶å°æ—  React Router é”™è¯¯
- âœ… æ§åˆ¶å°æ—  Antd ä¸Šä¸‹æ–‡è­¦å‘Š
- âœ… èœå•å¯¼èˆªæ­£å¸¸å·¥ä½œ
- âœ… æ¨¡æ‹Ÿæ•°æ®æ­£ç¡®æ˜¾ç¤º

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æµè§ˆå™¨å¼€å‘æ¨¡å¼
```bash
npm run dev
```
- ç”¨äºå‰ç«¯å¼€å‘å’Œç•Œé¢è°ƒè¯•
- ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå¿«é€Ÿçƒ­æ›´æ–°
- æ— æ³•è®¿é—®ç³»ç»Ÿ API å’ŒçœŸå®æ•°æ®åº“

### Tauri å¼€å‘æ¨¡å¼
```bash
npm run tauri:dev
```
- å®Œæ•´åŠŸèƒ½å¼€å‘å’Œæµ‹è¯•
- å®Œæ•´ Tauri API æ”¯æŒ
- çœŸå®çš„æ¡Œé¢åº”ç”¨ä½“éªŒ

### ç”Ÿäº§æ„å»º
```bash
npm run tauri:build
```
- æœ€ç»ˆç”¨æˆ·ä½¿ç”¨
- ä¼˜åŒ–çš„æ€§èƒ½å’Œä½“ç§¯
- è·¨å¹³å°å®‰è£…åŒ…

## ğŸ“Š æ¨¡æ‹Ÿæ•°æ®æ”¯æŒ

### å·²å®ç°çš„æ¨¡æ‹Ÿæ•°æ®
- âœ… åº”ç”¨é…ç½® (`get_app_config`)
- âœ… è¿æ¥ç®¡ç† (`get_connections`, `test_connection`)
- âœ… æ•°æ®åº“æ“ä½œ (`get_databases`)
- âœ… æŸ¥è¯¢æ‰§è¡Œ (`execute_query`)
- âœ… ç³»ç»Ÿä¿¡æ¯ (`get_system_info`)
- âœ… æ‰©å±•ç®¡ç† (`get_installed_plugins`, `get_api_integrations`)
- âœ… æ€§èƒ½ç›‘æ§ (`get_performance_metrics`, `get_slow_query_analysis`)

### æ¨¡æ‹Ÿæ•°æ®ç‰¹ç‚¹
- çœŸå®çš„æ•°æ®ç»“æ„
- éšæœºç”Ÿæˆçš„æ€§èƒ½æŒ‡æ ‡
- å®Œæ•´çš„é”™è¯¯å¤„ç†
- å¼€å‘å‹å¥½çš„æ—¥å¿—è¾“å‡º

## ğŸ”§ å¼€å‘å·¥å…·

### ç¯å¢ƒæ£€æµ‹
```typescript
import { isTauriEnvironment, isBrowserEnvironment } from '@/utils/tauri';

if (isBrowserEnvironment()) {
  console.log('Running in browser mode');
}
```

### å®‰å…¨ API è°ƒç”¨
```typescript
import { safeTauriInvoke } from '@/utils/tauri';

const result = await safeTauriInvoke('command_name', { args });
// è‡ªåŠ¨å¤„ç†ç¯å¢ƒå·®å¼‚ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿”å›æ¨¡æ‹Ÿæ•°æ®
```

### æ¶ˆæ¯æœåŠ¡
```typescript
import { showMessage } from '@/utils/message';

showMessage.success('æ“ä½œæˆåŠŸ');
// è‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„æ¶ˆæ¯ä¸Šä¸‹æ–‡
```

## ğŸ“ˆ åç»­è®¡åˆ’

### çŸ­æœŸ (1-2 å‘¨)
- [ ] ä¿®å¤å‰©ä½™çš„éæ ¸å¿ƒç»„ä»¶
- [ ] æ·»åŠ æ›´å¤šæ¨¡æ‹Ÿæ•°æ®åœºæ™¯
- [ ] å®Œå–„é”™è¯¯å¤„ç†

### ä¸­æœŸ (1 ä¸ªæœˆ)
- [ ] æ·»åŠ æµè§ˆå™¨æ¨¡å¼çš„åŠŸèƒ½æ¼”ç¤º
- [ ] ä¼˜åŒ–æ¨¡æ‹Ÿæ•°æ®çš„çœŸå®æ€§
- [ ] æ·»åŠ ç¦»çº¿æ¨¡å¼æ”¯æŒ

### é•¿æœŸ (3 ä¸ªæœˆ)
- [ ] è€ƒè™‘ PWA æ”¯æŒ
- [ ] æ·»åŠ åœ¨çº¿æ¼”ç¤ºéƒ¨ç½²
- [ ] å®Œå–„æ–‡æ¡£å’Œæ•™ç¨‹

## ğŸ‰ æ€»ç»“

ä¸»è¦çš„æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜å·²ç»è§£å†³ï¼š

1. **æ ¸å¿ƒé”™è¯¯ä¿®å¤** - React Router å’Œ Tauri API é—®é¢˜å·²è§£å†³
2. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–** - æ·»åŠ äº†å‹å¥½çš„æµè§ˆå™¨æ¨¡å¼æç¤º
3. **å¼€å‘ä½“éªŒæ”¹è¿›** - æä¾›äº†å®Œæ•´çš„å¼€å‘å·¥å…·å’Œæµ‹è¯•è„šæœ¬
4. **åŠŸèƒ½å®Œæ•´æ€§** - æ ¸å¿ƒåŠŸèƒ½åœ¨æµè§ˆå™¨æ¨¡å¼ä¸‹æ­£å¸¸å·¥ä½œ

ç°åœ¨æ‚¨å¯ä»¥ï¼š
- âœ… åœ¨æµè§ˆå™¨ä¸­æ­£å¸¸å¼€å‘å’Œè°ƒè¯•å‰ç«¯ç•Œé¢
- âœ… ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- âœ… åœ¨éœ€è¦å®Œæ•´åŠŸèƒ½æ—¶æ— ç¼åˆ‡æ¢åˆ° Tauri æ¨¡å¼
- âœ… äº«å—å¿«é€Ÿçš„çƒ­æ›´æ–°å¼€å‘ä½“éªŒ

**å»ºè®®**: è¿è¡Œ `npm run dev` æµ‹è¯•æµè§ˆå™¨æ¨¡å¼ï¼Œç¡®è®¤æ‰€æœ‰ä¿®å¤éƒ½æ­£å¸¸å·¥ä½œï¼
