# 🔗 连接管理

InfloWave 支持管理多个 InfluxDB 连接，本指南将详细介绍连接的创建、配置、管理和故障排除。

## 📋 连接概述

### 连接类型支持
- **InfluxDB 1.x** - 完全支持（推荐）
- **本地连接** - localhost 和本地网络
- **远程连接** - 通过网络访问的远程服务器
- **安全连接** - 支持用户名密码认证

### 连接状态
- 🟢 **已连接** - 连接正常，可以执行操作
- 🟡 **连接中** - 正在建立连接
- 🔴 **连接失败** - 连接异常，需要检查配置
- ⚪ **未连接** - 尚未建立连接

## ➕ 创建新连接

### 基本连接配置

1. 点击左上角的 **"+ 添加连接"** 按钮
2. 填写基本信息：

   | 字段 | 说明 | 示例 |
   |------|------|------|
   | 连接名称 | 自定义的连接显示名称 | `生产环境数据库` |
   | 服务器地址 | InfluxDB 服务器 IP 或域名 | `192.168.1.100` |
   | 端口 | InfluxDB 服务端口 | `8086` (默认) |
   | 用户名 | 数据库用户名 | `admin` |
   | 密码 | 数据库密码 | `your_password` |

### 高级配置选项

点击 **"高级选项"** 展开更多配置：

- **连接超时** - 连接超时时间（秒）
- **查询超时** - 查询执行超时时间（秒）
- **最大重试次数** - 连接失败时的重试次数
- **SSL/TLS** - 是否启用加密连接（如果服务器支持）

### 测试连接

1. 填写完连接信息后，点击 **"测试连接"** 按钮
2. 系统会尝试连接到指定的 InfluxDB 服务器
3. 测试结果：
   - ✅ **连接成功** - 显示服务器版本信息
   - ❌ **连接失败** - 显示具体错误信息

### 保存连接

测试成功后，点击 **"保存"** 按钮保存连接配置。

## 🔧 管理现有连接

### 连接列表操作

在左侧连接面板中，每个连接都支持以下操作：

#### 右键菜单
- **连接/断开** - 手动控制连接状态
- **编辑连接** - 修改连接配置
- **复制连接** - 基于现有连接创建新连接
- **测试连接** - 重新测试连接状态
- **删除连接** - 删除连接配置

#### 连接状态指示
- 连接名称前的圆点显示当前连接状态
- 鼠标悬停可查看详细状态信息

### 编辑连接

1. 右键点击连接，选择 **"编辑连接"**
2. 修改需要更改的配置项
3. 点击 **"测试连接"** 验证新配置
4. 点击 **"保存"** 应用更改

### 删除连接

1. 右键点击连接，选择 **"删除连接"**
2. 确认删除操作
3. 连接配置将被永久删除

> ⚠️ **注意**: 删除连接不会影响服务器上的数据，只是移除本地的连接配置。

## 🔄 连接状态管理

### 自动连接
- InfloWave 启动时会自动尝试连接到所有已保存的连接
- 可以在设置中关闭自动连接功能

### 手动连接控制
- 右键点击连接，选择 **"连接"** 或 **"断开"**
- 也可以双击连接名称快速连接/断开

### 连接池管理
- InfloWave 使用连接池技术优化性能
- 支持并发查询和操作
- 自动处理连接超时和重连

## 🔒 安全性

### 凭据存储
- 连接信息安全存储在本地
- 密码经过加密处理
- 不会上传到任何远程服务器

### 连接安全
- 支持 SSL/TLS 加密连接
- 建议在生产环境中启用加密
- 定期更新数据库密码

### 网络安全
- 确保 InfluxDB 服务器的网络安全配置
- 使用防火墙限制访问来源
- 避免在公网直接暴露数据库端口

## 🚨 故障排除

### 常见连接问题

#### 连接超时
**症状**: 连接测试时提示超时
**解决方案**:
1. 检查服务器地址和端口是否正确
2. 确认网络连通性（ping 服务器地址）
3. 检查防火墙设置
4. 增加连接超时时间

#### 认证失败
**症状**: 提示用户名或密码错误
**解决方案**:
1. 确认用户名和密码正确
2. 检查用户是否有相应权限
3. 确认 InfluxDB 是否启用了认证

#### 服务器不可达
**症状**: 无法连接到服务器
**解决方案**:
1. 确认 InfluxDB 服务是否正在运行
2. 检查服务器防火墙配置
3. 验证网络连接
4. 确认端口是否被占用

### 连接诊断工具

InfloWave 提供了内置的连接诊断功能：

1. 右键点击连接，选择 **"诊断连接"**
2. 系统会执行一系列检查：
   - 网络连通性测试
   - 端口可达性检查
   - 认证验证
   - 服务器响应测试

3. 根据诊断结果提供解决建议

### 日志查看

如果遇到复杂问题，可以查看连接日志：

1. 在设置中启用详细日志
2. 重现问题
3. 查看日志文件获取详细错误信息
4. 将日志信息提供给技术支持

## 💡 最佳实践

### 连接命名
- 使用有意义的连接名称，如 `生产环境-主库`
- 包含环境信息，便于区分
- 避免使用特殊字符

### 连接配置
- 为不同环境创建不同的连接
- 定期测试连接状态
- 及时更新过期的凭据

### 性能优化
- 合理设置连接超时时间
- 避免创建过多不必要的连接
- 定期清理无用的连接配置

### 安全建议
- 使用强密码
- 定期更换数据库密码
- 在生产环境中启用 SSL/TLS
- 限制数据库用户权限

## 🔧 高级功能

### 连接分组
- 可以为连接添加标签进行分组
- 支持按环境、项目等维度组织连接
- 便于管理大量连接

### 连接模板
- 可以将常用配置保存为模板
- 快速创建相似的连接
- 减少重复配置工作

### 批量操作
- 支持批量测试连接
- 批量更新连接配置
- 批量导入/导出连接配置

---

**掌握连接管理是使用 InfloWave 的基础，建议仔细阅读并实践本指南的内容。** 🎯

下一步：[数据库操作](./database-operations.md)
