# InfluxDB GUI Manager - 功能演示场景

## 🎯 右键快捷操作演示

### 场景 1: 数据探索新手用户

**用户背景**: 刚接触 InfluxDB，不熟悉 InfluxQL 语法，希望快速了解数据结构和内容。

#### 操作流程:
1. **连接数据库** → 在连接管理页面配置并连接到 InfluxDB
2. **浏览数据结构** → 在查询页面左侧看到数据库树形结构
3. **右键数据库** → 选择"显示所有测量"，自动执行 `SHOW MEASUREMENTS`
4. **右键测量** → 选择"数据预览" → "最新 100 条数据"
   - 自动生成并执行: `SELECT * FROM "temperature" ORDER BY time DESC LIMIT 100`
   - 无需手写 SQL，立即看到数据内容
5. **右键字段** → 选择"字段统计" → "基础统计"
   - 自动执行: `SELECT MIN("value"), MAX("value"), MEAN("value"), COUNT("value") FROM "temperature"`
   - 快速了解数据分布情况

#### 用户收益:
- ✅ 零 SQL 基础也能快速探索数据
- ✅ 直观了解数据库结构和内容
- ✅ 自动生成的查询可以作为学习参考

### 场景 2: 运维工程师日常监控

**用户背景**: 需要定期检查系统指标，快速定位异常数据。

#### 操作流程:
1. **快速检查数据量** → 右键测量 → "数据统计" → "记录总数"
   - 自动执行: `SELECT COUNT(*) FROM "cpu_usage"`
   - 快速确认数据采集是否正常
2. **查看最新状态** → 右键测量 → "数据预览" → "最近 1 小时数据"
   - 自动执行: `SELECT * FROM "cpu_usage" WHERE time >= now() - 1h`
   - 检查最新的系统状态
3. **按主机分组查看** → 右键标签 "host" → "按标签查询"
   - 快速生成按主机分组的查询
   - 对比不同主机的性能指标
4. **导出异常数据** → 右键测量 → "数据导出" → "导出为 Excel"
   - 快速导出数据用于进一步分析

#### 用户收益:
- ✅ 快速完成日常检查任务
- ✅ 无需记忆复杂的查询语句
- ✅ 高效的数据导出和分析

### 场景 3: 数据分析师深度分析

**用户背景**: 需要对时序数据进行统计分析，创建可视化图表。

#### 操作流程:
1. **了解数据分布** → 右键字段 → "字段统计" → "分位数统计"
   - 自动执行: `SELECT PERCENTILE("value", 50), PERCENTILE("value", 90), PERCENTILE("value", 95), PERCENTILE("value", 99) FROM "temperature"`
   - 了解数据的分布特征
2. **创建趋势图表** → 右键字段 → "字段图表" → "时序折线图"
   - 自动生成时序图表配置
   - 可视化数据趋势
3. **标签分析** → 右键标签 → "标签统计" → "标签值分布图"
   - 生成标签值的饼图或柱状图
   - 分析数据的分类分布
4. **自定义聚合** → 右键测量 → "快速图表" → "自定义图表"
   - 打开图表配置向导
   - 设置聚合函数和时间间隔

#### 用户收益:
- ✅ 快速生成统计分析查询
- ✅ 一键创建可视化图表
- ✅ 提高数据分析效率

### 场景 4: 数据库管理员维护操作

**用户背景**: 负责数据库的日常维护，需要清理数据、管理结构。

#### 操作流程:
1. **检查数据库状态** → 右键数据库 → "数据库信息"
   - 查看数据库大小、测量数量等统计信息
2. **查看保留策略** → 右键数据库 → "显示保留策略"
   - 自动执行: `SHOW RETENTION POLICIES ON "mydb"`
   - 检查数据保留配置
3. **清理测试数据** → 右键测量 → "删除测量"
   - 安全删除不需要的测量
   - 带确认对话框防止误操作
4. **导出数据库结构** → 右键数据库 → "导出数据库结构"
   - 生成包含所有测量、字段、标签的文档
   - 用于备份或迁移参考

#### 用户收益:
- ✅ 简化数据库维护操作
- ✅ 安全的删除操作（带确认）
- ✅ 便捷的结构导出功能

## 🚀 高级功能演示

### 智能查询生成

#### 场景: 复杂聚合查询
```
用户操作: 右键字段 "cpu_usage" → "聚合查询" → "按时间聚合"
系统行为:
1. 弹出配置对话框
2. 用户选择: 聚合函数(MEAN)、时间间隔(5m)、时间范围(24h)
3. 自动生成: SELECT MEAN("cpu_usage") FROM "system" WHERE time >= now() - 24h GROUP BY time(5m)
4. 执行查询并显示结果
```

#### 场景: 多维度分析
```
用户操作: 右键测量 → "多维度分析"
系统行为:
1. 分析测量的字段和标签结构
2. 推荐常用的分析维度组合
3. 生成多个相关查询选项
4. 用户选择后自动执行
```

### 智能图表推荐

#### 场景: 自动图表类型推荐
```
用户操作: 右键字段 → "智能图表"
系统分析:
1. 字段类型: 数值型
2. 数据模式: 时序数据
3. 数据分布: 连续变化
推荐结果: 时序折线图
自动配置: X轴(时间)、Y轴(字段值)、聚合方式(平均值)
```

### 批量操作

#### 场景: 多测量批量导出
```
用户操作: 
1. Ctrl+点击选择多个测量
2. 右键 → "批量导出"
系统行为:
1. 显示批量导出配置界面
2. 统一设置导出格式、时间范围
3. 并行导出所有选中的测量
4. 生成压缩包下载
```

## 🎨 用户界面交互

### 右键菜单视觉设计

#### 菜单层级结构
```
📊 temperature (测量)
├── 👁️ 数据预览               ▶ ┌─ 最新 100 条数据
│                              ├─ 最新 1000 条数据  
│                              ├─ 最近 1 小时数据
│                              ├─ 最近 24 小时数据
│                              └─ 自定义时间范围...
├── 🔍 数据结构               ▶ ┌─ 查看字段信息
│                              ├─ 查看标签键
│                              ├─ 查看标签值
│                              └─ 查看序列信息
├── 📊 数据统计               ▶ ┌─ 记录总数
│                              ├─ 时间范围
│                              ├─ 字段统计
│                              └─ 标签分布
├── 📈 快速图表               ▶ ┌─ 时序趋势图
│                              ├─ 字段分布图
│                              ├─ 标签统计图
│                              └─ 自定义图表...
├── 📤 数据导出               ▶ ┌─ 导出为 CSV
│                              ├─ 导出为 JSON
│                              ├─ 导出为 Excel
│                              └─ 导出查询结果
├── ─────────────────────────
├── 📋 复制测量名称
└── 🗑️ 删除测量
```

#### 操作反馈设计
- **悬停效果**: 菜单项悬停时显示操作说明
- **图标指示**: 不同操作类型使用不同颜色的图标
- **快捷键提示**: 显示相关的键盘快捷键
- **SQL 预览**: 悬停时显示将要执行的 SQL 语句

### 操作确认机制

#### 安全操作确认
```
删除操作确认对话框:
┌─────────────────────────────────────┐
│ ⚠️  确认删除测量                      │
├─────────────────────────────────────┤
│ 确定要删除测量 "temperature" 吗？     │
│ 此操作将删除所有相关数据！            │
│                                     │
│ 测量信息:                           │
│ • 数据点数: 1,234,567               │
│ • 时间范围: 2023-01-01 ~ 2023-12-31 │
│ • 存储大小: 45.6 MB                 │
│                                     │
│ [取消]  [确认删除]                   │
└─────────────────────────────────────┘
```

## 📊 性能优化场景

### 大数据集处理

#### 场景: 百万级数据预览
```
用户操作: 右键大表 → "数据预览" → "最新 100 条数据"
系统优化:
1. 自动添加 LIMIT 限制
2. 使用索引优化查询
3. 流式加载结果
4. 显示加载进度
```

#### 场景: 智能采样
```
用户操作: 右键大表 → "数据预览" → "智能采样"
系统行为:
1. 分析数据量级
2. 自动选择合适的采样策略
3. 生成代表性数据样本
4. 提供完整数据访问选项
```

## 🔧 错误处理和恢复

### 网络异常处理

#### 场景: 连接中断
```
用户操作: 右键操作触发查询
网络状态: 连接中断
系统行为:
1. 显示连接中断提示
2. 提供重试选项
3. 自动重连机制
4. 操作队列保存
```

### 查询错误处理

#### 场景: 语法错误
```
自动生成查询: SELECT * FROM "non_exist_table"
执行结果: 表不存在错误
系统行为:
1. 友好的错误信息显示
2. 提供修复建议
3. 相关文档链接
4. 重新选择表的选项
```

这些演示场景展示了右键快捷操作如何大大提升用户的使用效率，让复杂的数据库操作变得简单直观。
