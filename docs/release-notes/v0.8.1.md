# InfloWave v0.8.1 发布说明

## 🚀 S3/对象存储功能全面升级与用户体验优化

本版本重点增强了 S3/对象存储的管理能力，带来了完整的文件预览、权限管理、标签管理等企业级功能。同时在连接管理、国际化支持、工作区管理等方面进行了全面优化，显著提升了用户体验。

---

## ✨ 重要特性

### 📦 S3/对象存储功能大幅增强

#### 文件预览系统
- **新增** 多格式文件预览支持：图片、视频、音频、文本、代码、Excel 和 PDF
- **实现** 基于 Blob URL 的安全预览机制，替代 presigned URL
- **集成** xlsx 库用于 Excel 文件解析和显示
- **增强** MIME 类型检测和处理逻辑
- **添加** 链接点击拦截，自动使用系统浏览器打开外部链接
- **优化** 内存管理，自动清理 blob URL 避免内存泄漏
- **强化** 安全属性配置（sandbox、referrerPolicy）

#### 权限与标签管理
- **实现** 对象标签的获取、设置和管理功能
- **支持** ACL 权限设置和管理
- **提供** 完整的标签管理对话框
- **添加** 权限设置对话框功能

#### 文件操作增强
- **新增** 右键菜单功能，支持重命名、下载、复制、剪切和删除操作
- **实现** 文件拖放上传功能
- **支持** 文件框选功能
- **优化** 文件下载流程，使用原生文件保存对话框
- **改进** 文件夹创建逻辑，自动生成唯一名称并提供重命名提示

#### UI/UX 优化
- **实现** 无限滚动加载，替代传统分页
- **添加** 列宽调整功能
- **显示** Bucket 对象数量统计
- **优化** 缩略图显示样式和路径拼接逻辑
- **改进** 面包屑导航和工具栏样式
- **修复** 表格列宽调整和文本截断问题
- **过滤** 空名称对象，优化文件夹名称提取

#### 架构优化
- **重构** S3 浏览器组件，支持 bucket 级别导航
- **统一** S3 服务请求参数命名风格
- **优化** 类型定义，移除不必要的泛型约束
- **完善** 错误处理和用户反馈提示
- **增强** 日志记录和数据处理逻辑

### 🔌 连接管理增强

#### InfluxDB 支持优化
- **修复** InfluxDB 节点 ID 唯一性问题，确保多连接环境下全局唯一
- **支持** InfluxDB 2.x/3.x API Token 加密存储
- **增强** 连接测试和自动连接功能
- **优化** 多版本配置和连接测试
- **改进** 连接删除逻辑和连接测试
- **修复** 连接器表单验证和认证检查

#### 对象存储集成
- **添加** S3/MinIO 等对象存储数据库客户端支持
- **实现** S3DatabaseClient 包装器
- **提供** 基础的连接测试、桶列表、对象查询功能
- **优化** 端点 URL 构建逻辑，支持自定义协议前缀
- **完善** bucket 相关配置和翻译

#### 连接管理优化
- **重构** 连接管理器表单结构
- **优化** UI 布局和字段配置
- **增强** 树节点描述显示
- **改进** 连接配置变更检测逻辑
- **添加** Popconfirm 组件增强确认提示

### 🌍 国际化(i18n)全面完善

#### 核心组件国际化
- **完善** 数据库相关组件的多语言支持
- **实现** 结果面板国际化支持
- **添加** 连接管理功能的完整翻译
- **国际化** 连接详情对话框
- **支持** 数据库创建和查询历史的多语言

#### 系统级国际化
- **添加** 性能监控和菜单本地化翻译
- **实现** 菜单文本的国际化支持
- **完善** 错误消息和菜单翻译
- **优化** 语言代码支持和迁移机制
- **标准化** zh-CN 和 en-US 作为标准语言代码

#### 功能模块国际化
- **实现** 连接状态和端口管理组件的国际化
- **完善** 数据浏览器的多语言支持
- **添加** 工作区功能的翻译支持
- **优化** 外部链接打开逻辑的多语言提示

### 💼 工作区管理

- **新增** 工作区功能集成到右侧功能面板
- **实现** 工作区管理查询标签页
- **提供** 统一的工作区操作界面

### 📊 数据浏览器优化

- **增强** 数据筛选功能和用户体验
- **添加** 筛选功能并优化界面布局
- **优化** 表格数据浏览器筛选功能
- **调整** 日期选择器和表格浏览器样式
- **完善** 过滤操作符的多语言配置

### 🎨 UI/UX 改进

#### 界面优化
- **重构** 关于对话框界面设计
- **调整** 按钮和布局组件样式
- **优化** 外部链接打开逻辑
- **统一** 导入 openExternalLink 工具函数
- **增强** MarkdownRenderer 链接点击处理

#### 菜单系统
- **实现** 上下文菜单国际化支持
- **重构** 菜单动作元数据
- **添加** 原生应用功能翻译

### 🛠️ 开发体验优化

- **添加** 多种现代字体选项
- **移除** 开发模式下的测试工具加载逻辑
- **移除** 旧版测试运行器和类型测试文件
- **统一** 使用 logger 工具替代 console 日志
- **更新** 项目依赖版本
- **优化** 系统信息采集逻辑

---

## 🛠️ 修复与细节优化

### S3/对象存储
- 修复框选与列宽调整的冲突问题
- 修复缩略图加载逻辑，避免不必要的重复请求
- 修复 i18n 翻译结果类型转换问题
- 过滤空名称对象并优化文件夹名称提取

### 连接管理
- 修复 InfluxDB 节点 ID 唯一性问题
- 修复连接器表单验证和认证检查
- 优化连接删除逻辑，自动处理断开连接
- 改进连接配置变更检测

### 国际化
- 调整国际化配置和验证逻辑
- 重新组织查询页面标签页翻译结构
- 重构连接管理器国际化文案结构
- 优化国际化配置并预加载关键语言包

### UI/UX
- 调整按钮和布局组件样式
- 优化可调整大小面板组件的拖动性能
- 移除不必要的状态管理和事件监听逻辑
- 改进主题切换和语言切换时的用户提示信息

---

## 🔍 升级建议

1. **S3/对象存储用户**：
   - 升级后可体验完整的文件预览功能，支持多种文件格式
   - 建议测试对象标签和 ACL 权限管理功能
   - 尝试使用右键菜单进行文件操作
   - 体验无限滚动加载带来的流畅浏览体验

2. **InfluxDB 用户**：
   - 多连接环境下的节点 ID 唯一性问题已修复
   - API Token 现已支持加密存储，提升安全性
   - 建议重新测试连接功能，体验优化后的连接管理

3. **国际化用户**：
   - 语言代码已标准化为 zh-CN 和 en-US
   - 系统会自动迁移旧的语言代码
   - 建议检查界面翻译的完整性

4. **所有用户**：
   - 建议体验新增的工作区管理功能
   - 测试优化后的数据浏览器筛选功能
   - 查看改进后的用户界面和交互体验

---

## 📝 已知问题

- 部分 S3 服务提供商的特定功能可能需要额外配置
- 大文件预览可能需要较长加载时间
- 某些复杂的 ACL 权限配置可能需要手动调整

---

## 🙏 致谢

感谢所有为本版本贡献代码、提出建议和报告问题的用户！

欢迎体验 InfloWave v0.8.1，如遇问题欢迎在 [GitHub Issues](https://github.com/chenqi92/inflowave/issues) 中反馈！

