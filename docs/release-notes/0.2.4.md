# InfloWave v0.2.4

## 🚀 重要更新

InfloWave v0.2.4 专注于用户体验优化和核心功能增强，引入了全新的消息通知中心、数据生成器优化、以及多项界面和性能改进，为用户提供更智能、更高效的时序数据库管理体验。

## ✨ 主要新功能

### 📢 全新消息通知中心
- **消息通知面板** - 新增右侧消息通知中心，统一管理所有系统消息
- **消息分类管理** - 支持按来源分类（连接、查询、数据、系统、导出等）
- **消息复制功能** - 一键复制消息内容到剪贴板，便于分享和记录
- **暗色模式优化** - 完美适配暗色主题，提供清晰的视觉对比度
- **实时消息记录** - 所有 showMessage 调用自动记录到通知中心
- **会话管理** - 软件重启后自动清空历史消息，保持界面整洁

### 🔧 数据生成器增强
- **字段类型智能识别** - 修复字段类型解析问题，正确识别 integer、float、boolean 类型
- **数据格式优化** - 生成的数据类型与 InfluxDB 字段定义完全匹配
- **写入验证机制** - 新增多重验证查询，确保数据真实写入
- **详细调试日志** - 提供完整的数据生成和写入过程日志
- **错误处理改进** - 更准确的错误信息显示和问题诊断

### 🎨 界面体验优化
- **搜索框图标对齐** - 修复扩展管理和查询历史中搜索框图标垂直对齐问题
- **查询历史重构** - 替换查询历史组件，提供更好的用户体验
- **页面结构优化** - 重构页面结构，替换可视化组件，提升性能
- **组件逻辑简化** - 优化和简化多个组件的逻辑，提高代码可维护性

## 🔧 技术改进

### ⚡ 性能优化
- **启动速度提升** - 优化字体加载和启动检查，减少应用启动时间
- **加载进度显示** - 新增启动检查脚本，提供更好的加载反馈
- **组件渲染优化** - 重构多个核心组件，减少不必要的重渲染
- **内存使用优化** - 改进组件清理逻辑，预防内存泄漏

### 🛠️ 构建和部署改进
- **字体依赖优化** - 添加本地字体文件，移除外部字体依赖
- **CI/CD 增强** - 添加 CI 环境中动态下载字体的脚本
- **跨平台编译** - 解决 ARM64 Linux 交叉编译时的 OpenSSL 错误问题
- **配置文件优化** - 移除不必要的语言后缀，简化配置结构

### 🎯 用户体验改进
- **消息通知集成** - 所有系统消息统一通过通知中心管理
- **暗色模式支持** - 完善暗色模式下的视觉效果和对比度
- **界面一致性** - 统一搜索框样式和图标对齐方式
- **操作反馈** - 提供更及时、更准确的操作结果反馈

## 🔨 重要修复

### 🐛 数据处理修复
- **字段类型解析** - 修复自定义表数据生成中字段类型解析错误
- **数据写入验证** - 解决数据写入成功但实际未写入的问题
- **查询结果处理** - 改进查询结果的解析和显示逻辑
- **边界情况处理** - 增强字段和标签查询的边界情况处理

### 🔧 界面问题修复
- **搜索框对齐** - 修复搜索框中图标贴近底部的对齐问题
- **暗色模式显示** - 解决暗色模式下消息卡片不够清晰的问题
- **组件状态管理** - 改进组件间的状态同步和数据传递
- **样式一致性** - 统一不同组件间的样式和交互逻辑

### 🛡️ 稳定性提升
- **错误处理增强** - 改进错误信息的准确性和用户友好性
- **异常恢复** - 加强异常情况下的自动恢复机制
- **资源管理** - 优化系统资源的使用和释放
- **类型安全** - 修复 TypeScript 类型错误，提高代码安全性

## 📦 新增组件

### 📢 通知系统组件
- **NotificationPanel** - 消息通知面板组件，支持消息查看、复制、删除
- **useNotificationStore** - 通知状态管理 Hook，基于 Zustand 实现
- **useAppNotifications** - 应用通知初始化 Hook，提供便捷的通知 API
- **消息分类 API** - 支持按来源分类的消息管理接口

### 🔧 工具组件
- **启动检查脚本** - 应用启动时的系统检查和初始化脚本
- **字体管理工具** - 本地字体文件管理和动态加载工具
- **数据验证工具** - 数据写入验证和结果确认工具

## 📋 API 和接口更新

### 🔗 新增 API
- **通知管理 API** - 消息添加、删除、标记已读等接口
- **数据验证 API** - 数据写入验证和查询确认接口
- **字体加载 API** - 字体文件加载和管理接口

### 🔄 API 改进
- **消息方法增强** - showMessage 方法自动集成通知中心记录
- **错误处理标准化** - 统一错误信息格式和处理流程
- **类型定义完善** - 加强 TypeScript 类型定义和检查

## 🔄 兼容性说明

- **向后兼容性**: 完全兼容 v0.2.2，配置和数据可无缝迁移
- **界面变化**: 新增消息通知中心，不影响现有功能使用
- **消息处理**: 消息显示方式保持不变，同时记录到通知中心
- **数据格式**: 数据生成器生成的数据格式更加准确和标准

## 📋 升级建议

### 🚀 推荐升级步骤
1. **备份数据**: 升级前建议备份重要的查询历史和配置
2. **清理缓存**: 清理旧版本缓存以确保新功能正常工作
3. **体验通知中心**: 熟悉新的消息通知中心功能
4. **测试数据生成**: 验证数据生成器的改进效果

### 💡 新功能体验建议
1. **消息通知中心**: 点击右侧消息图标体验全新的通知管理
2. **消息复制功能**: 尝试复制重要消息内容到剪贴板
3. **暗色模式**: 切换暗色模式体验优化后的视觉效果
4. **数据生成**: 使用改进后的数据生成器创建测试数据

## 🎯 下个版本预告

- **查询性能监控**: 计划添加查询执行时间分析和性能优化建议
- **数据可视化增强**: 开发更多图表类型和交互式数据探索功能
- **连接管理优化**: 改进多实例连接管理和连接池功能
- **插件系统扩展**: 完善插件管理和自定义扩展机制

---

> 🎯 **开发亮点**: 本版本引入了全新的消息通知中心，大幅提升了用户对系统状态的感知能力。数据生成器的优化解决了数据类型匹配问题，确保生成的数据完全符合 InfluxDB 规范。

---

> 📝 **重要提醒**: 本版本包含重要的数据生成器修复和消息通知系统，强烈建议升级以获得更准确的数据处理和更好的用户反馈体验。新的通知中心将帮助用户更好地跟踪系统操作和状态变化。