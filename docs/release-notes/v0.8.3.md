# InfloWave v0.8.2 发布说明

## 🚀 用户体验全面升级与数据库功能增强

本版本重点优化了用户界面体验，带来了更现代化的连接管理对话框、更智能的表格渲染系统，以及大幅增强的 IoTDB 和 InfluxDB 支持。同时在时间格式处理、数据浏览器、连接状态管理等方面进行了深度优化。

---

## ✨ 重要特性

### 🎨 UI/UX 全面现代化

#### 连接管理对话框重构
- **重构** 连接对话框标签页样式，采用下划线形式的现代化 Tab 设计
- **优化** Tab 宽度自适应内容，不再占满整个宽度
- **紧凑化** 表单布局，减少间距提升空间利用率
- **统一** 组件尺寸，所有输入框、下拉框使用紧凑尺寸
- **改进** 复选框组件，支持自定义尺寸并自动调整对勾图标
- **替换** 开关按钮为复选框，提供更直观的布尔选项交互
- **更新** 数字输入框图标，使用上下三角箭头替代加减号
- **隐藏** 数字输入框的调整按钮，界面更简洁

#### 表格系统全面优化
- **实现** 动态表格宽度计算，自适应列宽总和
- **优化** 表格尺寸计算逻辑，确保内容完整显示
- **改进** 表格列宽自适应算法，避免内容被截断
- **增强** 表格滚动行为，提升大数据集浏览体验
- **完善** 表格高度计算，适配不同视口尺寸
- **添加** 行标记（序号）固定宽度计算

### 🗄️ IoTDB 功能大幅增强

#### 核心功能
- **新增** 存储组管理功能
- **支持** 设备节点操作和管理
- **实现** 时间序列查询优化
- **增强** 会话管理与自动重连机制
- **优化** 树节点结构和数据查询功能

#### 数据处理优化
- **改进** 时间序列数据解析和显示
- **优化** IoTDB 时间列处理与数据映射逻辑
- **统一** 时间列名匹配，使用小写处理提高兼容性
- **增强** 时间戳解析，支持数字和字符串类型
- **完善** SELECT * 查询的列名处理，支持多种格式

#### 查询与节点管理
- **优化** 设备和字段查询逻辑
- **改进** 树形视图节点展开，修复无限循环问题
- **增强** 表结构获取的防重复机制
- **完善** 设备和时间序列节点的懒加载逻辑
- **支持** 存储组节点激活状态显示
- **统一** 设备节点图标显示逻辑

#### 调试与日志
- **优化** IoTDB 客户端调试日志级别
- **增加** 详细的调试日志和追踪信息
- **完善** 异常处理机制，记录格式化失败日志

### 📊 InfluxDB 功能增强

- **优化** 测量节点的标签和字段获取逻辑
- **修改** 测量节点直接获取所有标签和字段
- **更新** InfluxDB 1.x 查询语法，添加时间过滤条件
- **修复** 标签值获取时的参数传递问题
- **新增** 标签值对话框功能
- **移除** 冗余的字段和标签详情菜单选项

### ⏰ 时间格式处理

- **支持** 多种时间格式解析和显示
- **改进** 日期格式化显示，统一使用中文本地化格式
- **优化** 时间戳列处理方式
- **增强** 时间列识别和排序功能

### 🔌 连接管理优化

- **新增** 根据数据库类型动态显示连接版本信息
- **优化** 连接节点的加载状态管理
- **改进** 连接节点 loading 状态判断逻辑
- **支持** 同时考虑连接状态和子节点加载状态
- **增强** 连接建立过程中的状态管理
- **完善** 连接失败时的状态清理
- **优化** 使用缓存数据时的状态处理

### 📋 数据浏览器改进

- **优化** 标签页加载状态管理
- **改进** 标签页加载状态监听逻辑
- **支持** 处理标签页关闭事件
- **清理** 已关闭标签页的加载状态标记
- **避免** 重复触发标签页刷新操作
- **增强** 双击节点时的标签页切换行为
- **防止** 加载状态内存泄漏

---

## 🛠️ 修复与细节优化

### IoTDB
- 修复 IoTDB 时间序列数据解析和显示问题
- 修复树形视图节点展开的无限循环问题
- 修复 IoTDB 客户端连接检查逻辑
- 修复时间序列节点双击打开数据 tab 的问题
- 修复排序功能中的时间列识别问题

### 表格系统
- 修复表格列宽超出可视区域被截断的问题
- 修复表格宽度计算不准确的问题
- 优化表格滚动性能

### 连接管理
- 修复连接节点加载状态残留问题
- 优化连接失败时的状态清除
- 改进连接状态变化的响应速度

### UI/UX
- 修复复选框与文字对齐问题
- 优化表单组件的视觉层次
- 改进对话框布局的紧凑性

### 代码质量
- 移除未使用的图标
- 添加图标检测和删除脚本
- 优化代码借用逻辑，提高安全性

---

## 🔍 升级建议

1. **IoTDB 用户**：
   - 升级后可体验完整的存储组管理功能
   - 建议测试设备节点操作和时间序列查询
   - 体验优化后的会话管理和自动重连机制
   - 查看改进后的时间列数据显示

2. **InfluxDB 用户**：
   - 体验优化后的测量节点标签和字段获取
   - 使用新增的标签值对话框功能
   - 测试改进后的查询语法和时间过滤

3. **界面体验**：
   - 体验重构后的连接管理对话框
   - 查看更现代化的 Tab 切换效果
   - 感受紧凑化布局带来的空间优势
   - 使用新的复选框替代开关按钮

4. **数据浏览**：
   - 体验优化后的表格渲染性能
   - 测试改进的标签页加载状态管理
   - 使用动态宽度计算的表格显示

5. **所有用户**：
   - 建议测试连接节点的加载状态
   - 体验多种时间格式的解析和显示
   - 查看数据库版本信息的动态显示

---

## 📝 已知问题

- 某些 IoTDB 复杂查询可能需要额外优化
- 大数据集的表格渲染可能需要较长时间
- 部分时间格式的自动识别可能不够精确

---

## 🙏 致谢

感谢所有为本版本贡献代码、提出建议和报告问题的用户！

欢迎体验 InfloWave v0.8.3，如遇问题欢迎在 [GitHub Issues](https://github.com/chenqi92/inflowave/issues) 中反馈！
