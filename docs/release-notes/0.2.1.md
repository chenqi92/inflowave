# InfloWave v0.2.1

## 🚀 重大更新

InfloWave v0.2.1 带来了巨大的功能提升，专注于表格数据处理、用户体验优化和启动性能改进，为数据库管理提供更强大、更直观的界面体验。

## ✨ 主要新功能

### 📊 全新表格数据浏览器
- **Excel风格筛选功能** - 支持多值筛选与列唯一值加载，提供类似Excel的筛选体验
- **单元格范围选择** - 支持多单元格拖拽选择和批量数据复制操作
- **高级行选择** - 新增行选择、批量操作和行/单元格复制功能
- **虚拟化渲染** - 引入虚拟化技术大幅提升大数据集的表格渲染性能
- **列管理增强** - 支持外部传递列管理状态，包括列选择、排序和宽度调整
- **滚动同步优化** - 改进横向滚动同步精度，增强宽表操作体验

### 🛠️ 智能编辑器系统
- **智能提示服务** - 全新的智能SQL提示功能，支持数据库结构感知
- **多数据库语法高亮** - 支持InfluxQL、Flux、SQL等多种数据库语言高亮
- **Monaco编辑器优化** - 全局配置优化，改进剪贴板安全性和编辑体验
- **语言检测增强** - 智能识别查询语言类型，提供相应的语法提示

### 🎯 用户交互体验
- **右键菜单系统** - 完整的上下文菜单支持，提供快捷操作入口
- **未保存标签页对话框** - 智能检测未保存内容，提供保存、丢弃或取消选项
- **原生菜单集成** - 完善的系统级菜单支持，包括文件、编辑、查看等功能
- **全局搜索功能** - 支持Ctrl+Shift+P快捷键打开全局搜索
- **用户引导系统** - 新增用户指引弹框和帮助系统

### 📋 数据管理功能
- **表结构分析** - 新增表设计器对话框和表信息查看功能
- **统计信息展示** - 支持查看表记录数统计和数据库详细信息
- **查询示例模态框** - 提供常用查询模板和示例
- **数据导出增强** - 支持多种格式导出，包括原生文件对话框

## 🔧 技术改进

### ⚡ 性能优化
- **启动速度提升** - 优化应用启动流程，减少加载延迟
- **macOS启动优化** - 修复macOS下启动时黑色背景问题，改善启动体验
- **虚拟化技术** - 引入表格虚拟化，支持大数据集高性能渲染
- **内存管理优化** - 改进内存使用效率，优化长时间运行性能

### 🛡️ 稳定性提升
- **错误处理增强** - 完善错误边界和异常处理机制
- **连接管理优化** - 改进数据库连接管理和状态同步
- **组件重构** - 重构多个核心组件，提升代码质量和维护性
- **类型安全性** - 加强TypeScript类型检查和类型安全性

### 🎨 界面设计
- **无障碍支持** - 添加完整的无障碍样式和功能支持
- **主题系统增强** - 改进深色/浅色主题切换和系统主题跟随
- **字体系统扩展** - 新增多种字体选择，支持等宽字体和系统字体
- **布局模式优化** - 提供紧凑、舒适、宽松等多种布局模式

## 🔥 生产环境优化

### 📱 控制台日志管理
- **智能日志过滤** - 生产环境自动屏蔽console.log和console.info
- **环境变量控制** - 支持DISABLE_CONSOLE_LOGS环境变量控制日志输出
- **调试模式保留** - 保留warn、error、debug级别日志用于故障排除
- **GitHub Actions集成** - 所有workflow自动启用日志屏蔽功能

### 🚀 启动体验改进
- **窗口显示优化** - 修复macOS下启动时的黑色背景和空白区域
- **加载时间优化** - 减少人工延迟，加快应用响应速度
- **渐进式加载** - 优化资源加载策略，改善首次启动体验

## 🐛 关键错误修复

### 🔨 表格组件修复
- **滚动同步问题** - 修复表格横向滚动同步不准确的问题
- **选择状态管理** - 改进行选择和单元格选择的状态管理
- **虚拟化渲染** - 修复虚拟化表格的渲染和事件处理问题
- **列宽计算** - 优化列宽自动调整和手动调整逻辑

### 🎯 编辑器修复
- **Monaco配置** - 修复Monaco编辑器的全局配置和Worker问题
- **剪贴板安全** - 增强剪贴板操作的安全性和兼容性
- **语法高亮** - 修复多语言语法高亮的切换和显示问题

### 🔧 系统级修复
- **菜单事件处理** - 修复原生菜单事件处理和路由跳转问题
- **连接状态同步** - 改进前后端连接状态同步机制
- **错误边界** - 完善React错误边界和异常捕获

## 📦 新增组件和功能

### 🎛️ 新增组件
- **UnifiedDataTable** - 统一的数据表格组件，支持多种显示模式
- **VirtualizedTableDataBrowser** - 虚拟化表格浏览器
- **TableDesignerDialog** - 表结构设计器对话框
- **TableInfoDialog** - 表信息详情对话框
- **UnsavedTabsDialog** - 未保存标签页提醒对话框
- **ExportOptionsDialog** - 数据导出选项对话框

### 🔧 新增工具
- **智能提示服务** - 支持数据库结构感知的SQL提示
- **语法高亮管理器** - 多语言语法高亮配置和管理
- **剪贴板安全工具** - 增强的剪贴板操作安全性
- **错误日志系统** - 完善的错误记录和分析系统

## 🔄 兼容性说明

- **数据库兼容性**: 完全兼容 InfluxDB 1.x、2.x、3.x 版本，改进版本检测逻辑
- **操作系统支持**: 
  - Windows 10/11 (x64/x86)
  - macOS 10.15+ (Intel/Apple Silicon) - 优化启动体验
  - Linux x64/ARM64 (Ubuntu, Debian, CentOS, Fedora等)
- **配置兼容性**: 完全向后兼容，支持自动配置迁移
- **主题兼容性**: 支持系统主题跟随和手动切换

## 📋 升级建议

### 🚀 推荐升级步骤
1. **备份数据**: 升级前建议备份查询历史和用户配置
2. **清理缓存**: 建议清理旧版本缓存以获得最佳性能
3. **验证功能**: 升级后测试新的表格功能和编辑器体验
4. **配置检查**: 检查主题和布局设置是否符合预期

### 💡 新功能体验建议
1. **表格功能**: 尝试新的Excel风格筛选和多选功能
2. **编辑器增强**: 体验智能提示和多语言语法高亮
3. **右键菜单**: 使用新的右键菜单快捷操作
4. **虚拟化**: 在大数据集上体验虚拟化渲染性能

## 🎯 下个版本预告

- **查询优化器**: 计划添加查询性能分析和优化建议
- **数据可视化增强**: 新增更多图表类型和交互功能  
- **插件系统**: 开发插件扩展机制支持第三方扩展
- **协作功能**: 研发多用户协作和查询分享功能

---

> 🎯 **开发亮点**: 本版本是一个里程碑式的更新，全新的表格数据浏览器和智能编辑器系统大幅提升了数据处理能力。虚拟化技术的引入让大数据集操作更加流畅，而生产环境优化确保了更好的用户体验。

---

> 📝 **重要提醒**: 本版本包含大量界面和功能改进，特别是表格操作体验得到显著提升。强烈建议所有用户升级以获得更好的数据浏览和编辑体验。新的智能提示功能将大大提高SQL编写效率。