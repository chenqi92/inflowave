# InfloWave v0.8.0 发布说明

## 🚀 InfluxDB 2.x 管理与查询体验全面升级

本版本聚焦于完善 InfluxDB 2.x 的组织/存储桶管理能力，扩展查询引擎对 InfluxQL 的支持，强化性能监控，同时在界面交互与标签页管理上带来多项体验优化。

---

## ✨ 重要特性

### 🗄️ InfluxDB 2.x 管理能力跃升
- **新增** InfluxDB 2.x Organization 与 Bucket 的上下文菜单、打开/关闭、信息查看、保留策略与删除操作等完整管理流程。
- **重构** InfluxDB 2.x 连接、树节点与菜单处理逻辑，引入 `ConnectionService`、`OrganizationMenuHandler`、`BucketMenuHandler` 等抽象，确保节点状态与缓存准确同步。
- **增强** 树形结构刷新、展开与状态保持，在关闭节点、切换组织或存储桶时自动同步后端状态并记录调试日志。

### 📥 数据写入与 Flux 能力
- **支持** 通过 Line Protocol 写入数据并在客户端内直接执行 Flux 查询，提供 InfluxDB 2.x 全链路体验。
- **完善** Flux 请求结构，自动补齐 org 参数并支持多种节点类型的查询触发。

### 🧠 InfluxQL 查询增强
- **实现** InfluxQL 聚合函数识别、校验与错误提示，覆盖常见统计函数并优化聚合结果展示逻辑。
- **新增** 多条 INSERT 语句解析能力，可一次性识别批量写入并正确标记 SQL 类型。

### 📊 性能监控中心
- **引入** 性能统计服务与采集器，追踪查询耗时、成功率、系统 CPU/内存占用等指标。
- **支持** 查询历史可视化、实时自动刷新与历史数据保留策略，帮助定位性能瓶颈。

### 🖥️ 交互与界面优化
- **主题切换**：主工具栏新增明暗主题切换入口，统一右侧功能栏展示。
- **标签页管理**：实现标签页拖拽排序、独立窗口分离/回收、查询结果持久化与恢复，多窗口操作更流畅。
- **设置持久化**：应用设置、用户偏好及懒加载批次大小等配置支持持久化存储。
- **剪贴板体验**：优化编辑器初始状态与粘贴逻辑，避免重复同步并强化批量操作反馈。

---

## 🛠️ 修复与细节优化
- **树组件**：修复自动展开逻辑、窗口场景下的数据库初始化及查询结果恢复问题。
- **查询结果**：优化独立窗口与 Tab 切换时的状态管理，避免结果丢失或显示异常。
- **布局样式**：更新界面阴影、按钮、分离窗口等视觉细节，确保主题一致性。
- **提示系统**：统一 Toast 行为，防止消息叠加造成干扰。
- **窗口管理**：修复主窗口获取失败与分离窗口重新附加时的异常问题。

---

## 🔍 升级建议
- 升级后请在 InfluxDB 2.x 连接下重新展开组织与存储桶节点，以体验全新的上下文菜单与操作能力。
- 建议同时测试 InfluxQL、Flux 以及 Line Protocol 写入，以验证查询类型识别与性能监控面板的协同效果。

欢迎体验 InfloWave v0.8.0，如遇问题欢迎在 Issue 中反馈！
