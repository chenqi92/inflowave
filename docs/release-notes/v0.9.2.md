# InfloWave v0.9.1 发布说明

## 🚀 IoTDB 增强与编辑器优化

本版本专注于 IoTDB 数据库支持的全面增强，包括存储组、设备、时间序列和模板管理功能，同时优化了代码编辑器在生产环境中的样式表现。

---

## ✨ 重要特性

### 🗄️ IoTDB 完整管理功能

#### 存储组管理
- **新增** 创建存储组功能，支持通过右键菜单快速创建
- **新增** 删除存储组功能，带确认提示防止误操作
- **优化** 存储组节点的上下文菜单交互

#### 设备管理
- **新增** 创建设备对话框，支持在存储组下创建新设备
- **新增** 设备列表查看功能
- **新增** 设备信息详情对话框

#### 时间序列管理
- **新增** 创建时间序列对话框，支持完整的配置选项
- **支持** 数据类型选择（BOOLEAN、INT32、INT64、FLOAT、DOUBLE、TEXT）
- **支持** 编码方式选择（PLAIN、RLE、GORILLA、DICTIONARY、TS_2DIFF）
- **支持** 压缩方式选择（UNCOMPRESSED、SNAPPY、GZIP、LZ4、ZSTD）
- **新增** 时间序列信息详情对话框

#### 模板管理
- **新增** 模板创建功能，支持完整的编码和压缩选项
- **新增** 模板挂载/卸载功能
- **新增** 模板删除功能
- **新增** 模板管理界面的国际化支持

### 📝 代码编辑器优化

#### 生产环境样式修复
- **修复** 打包后编辑器行号显示位置错误的问题
- **修复** SQL 语法高亮在生产环境中失效的问题
- **新增** CodeMirror 6 核心布局样式的静态 CSS 回退
- **优化** 自动完成弹窗的边框、背景色和圆角样式

#### 自动完成界面优化
- **调整** tooltip 位置为固定定位并添加阴影效果
- **修改** 自动完成列表最大高度从 10em 到 300px
- **调整** 列表项内边距和行高提升可读性
- **新增** 选中项高亮背景与前景色
- **重新设计** completion 图标尺寸与间距
- **加粗** 匹配文本并去除下划线装饰

### 🌐 国际化增强

#### i18n 开发工具
- **新增** 缺失翻译键的自动记录机制
- **新增** 自动保存缺失键到文件的功能
- **新增** 命名空间支持以提高翻译键的可追溯性
- **新增** clean-missing-i18n.cjs 脚本用于清理重复翻译键
- **新增** i18n 最佳实践文档

#### 翻译更新
- **新增** IoTDB 命名空间翻译文件
- **新增** 上下文菜单相关翻译
- **更新** 安全设置和面板相关翻译

### 🎨 表格主题优化

- **新增** 动态主题切换支持，响应系统或用户主题变化
- **优化** 主题颜色统一从 CSS 变量中读取
- **支持** 根据用户字体偏好动态调整表格字体样式
- **新增** 主题切换日志以便调试和监控

---

## 🛠️ 修复与细节优化

### 核心修复
- **修复** IoTDBTemplateDialog 对话框关闭逻辑，允许通过 ESC 键或 X 按钮正常关闭
- **修复** 数据库类型获取逻辑，优先从节点本身获取 dbType
- **修复** 测量值名称提取逻辑，兼容字符串和对象两种数据格式

### 数据库操作优化
- **实现** 局部节点刷新功能，替代全局刷新提升性能
- **优化** 数据库和表删除操作后刷新对应父节点
- **优化** 设备和时间序列创建后的局部节点刷新逻辑

### S3 浏览器增强
- **新增** 创建存储桶功能，支持自动命名和命名验证
- **新增** 创建文件夹功能，包含名称验证和错误提示
- **新增** 返回根目录导航选项
- **修复** 多选对象时的索引问题

---

## 📁 技术改进

### 后端 (Rust)
- 新增 `create_iotdb_storage_group` 命令
- 新增 `delete_iotdb_storage_group` 命令
- 新增 `create_iotdb_timeseries` 命令
- 新增 `delete_iotdb_timeseries` 命令
- 新增 `insert_iotdb_data` 命令
- 新增 `create_iotdb_template` 命令
- 新增 `mount_iotdb_template` 命令
- 新增 `unmount_iotdb_template` 命令
- 新增 `drop_iotdb_template` 命令
- 重构 IoTDB 命令为 camelCase 格式
- 使用 ConnectionService 替代 ConnectionManager

### 前端 (TypeScript)
- 新增 `CreateTimeseriesDialog` 组件
- 新增 `CreateDeviceDialog` 组件
- 优化 `IoTDBTemplateDialog` 组件
- 新增 `useContextMenuTranslation` Hook
- 扩展 Vite 配置中的 editor 模块依赖

### 工作流优化
- 新增独立的 Cloudflare R2 上传工作流
- 支持选择性上传多种平台包
- 支持自动更新 Release 说明添加 R2 下载链接
- 优化 AWS CLI 安装和验证步骤

---

## 🔍 升级建议

1. **IoTDB 用户**：
   - 现在可以通过右键菜单完整管理存储组、设备和时间序列
   - 模板管理功能已完善，支持创建、挂载、卸载和删除

2. **所有用户**：
   - 代码编辑器在打包后的应用中样式显示已修复
   - 自动完成界面更加美观和易用
   - 表格组件支持动态主题切换

3. **开发者**：
   - 新增 i18n 开发工具帮助管理翻译键
   - 局部刷新机制提升了数据库操作的响应速度

---

## 🙏 致谢

感谢所有反馈问题和建议的用户，帮助我们不断改进 InfloWave！

欢迎体验 InfloWave v0.9.1，如遇问题欢迎在 [GitHub Issues](https://github.com/chenqi92/inflowave/issues) 中反馈！

